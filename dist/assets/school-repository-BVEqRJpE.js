var R=Object.defineProperty;var p=(t,e,s)=>e in t?R(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var n=(t,e,s)=>p(t,typeof e!="symbol"?e+"":e,s);import{S as v,R as y,U as w,p as _,V as o,W as E,X as l,Y as u,Z as L,_ as g,$ as m,a0 as A,a1 as D}from"./index-CpIGLp9M.js";var d=(t=>(t.SCHOOLS="schools",t.STUDENTS="students",t.WEEKLY_LESSONS="weeklyLessons",t.DAILY_LESSONS="dailyLessons",t.RECOVERY_LESSONS="recoveryLessons",t))(d||{});const O=()=>({toFirestore:t=>t,fromFirestore:t=>{const e=t.data();return e.id=t.id,e}}),C=t=>v(y(),t).withConverter(O());function U(t,e){const s=`${t}/${e}/user${t.charAt(0).toUpperCase()+t.slice(1)}`;return C(s)}class q{constructor(e){n(this,"user",w());n(this,"cache",{});this._collectionReference=e}get collectionReference(){var e,s,c;return(this.cache.userId!=((e=this.user.value)==null?void 0:e.uid)||!this.cache.collectionReference)&&(this.cache={userId:(s=this.user.value)==null?void 0:s.uid,collectionReference:this._collectionReference(((c=this.user.value)==null?void 0:c.uid)??"")}),this.cache.collectionReference}observe(e){return _(()=>o(this.collectionReference,e.value))}async get(e){return(await this.getDoc(e)).data()}async getDoc(e){return await E(o(this.collectionReference,e))}async getAll(...e){const s=l(this.collectionReference,...e);return(await u(s)).docs.map(i=>i.data())}async getAllDocs(...e){const s=l(this.collectionReference,...e);return await u(s)}async save(e,s){return s!=null?(L(o(this.collectionReference,s),e),s):(await g(this.collectionReference,e)).id}observeAll(...e){const s=new D,c=l(this.collectionReference,...e),i=m(c,a=>{const f=a.docs.map(S=>S.data());s.next(f)},a=>{s.error(a)});return s.setUnsubscription(i),s}async delete(e){await A(o(this.collectionReference,e))}deleteAll(){throw new Error("Method not implemented.")}}const r=class r extends q{constructor(){super(e=>U(d.SCHOOLS,e))}static get instance(){return this._instance||(this._instance=new r),this._instance}};n(r,"_instance",null);let h=r;export{q as A,d as D,h as S,U as u};
